// ../node_modules/@semoss/sdk/dist/insight.store-1d26f990.js
var t = (function() {
  function t2() {
  }
  var e2;
  return Object.defineProperty(t2, "APP", { get: function() {
    return this._store.APP;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2, "MODULE", { get: function() {
    return this._store.MODULE;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2, "ACCESS_KEY", { get: function() {
    return this._store.ACCESS_KEY;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2, "SECRET_KEY", { get: function() {
    return this._store.SECRET_KEY;
  }, enumerable: false, configurable: true }), e2 = t2, t2._store = { APP: "", MODULE: "", ACCESS_KEY: "", SECRET_KEY: "" }, t2.update = function(t3) {
    void 0 === t3 && (t3 = {}), t3.hasOwnProperty("APP") && (e2._store.APP = t3.APP), t3.hasOwnProperty("MODULE") && (e2._store.MODULE = t3.MODULE), t3.hasOwnProperty("ACCESS_KEY") && (e2._store.ACCESS_KEY = t3.ACCESS_KEY), t3.hasOwnProperty("SECRET_KEY") && (e2._store.SECRET_KEY = t3.SECRET_KEY);
  }, t2;
})();
var e = function(t2, n2) {
  return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t3, e2) {
    t3.__proto__ = e2;
  } || function(t3, e2) {
    for (var n3 in e2) Object.prototype.hasOwnProperty.call(e2, n3) && (t3[n3] = e2[n3]);
  }, e(t2, n2);
};
function n(t2, n2) {
  if ("function" != typeof n2 && null !== n2) throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
  function r2() {
    this.constructor = t2;
  }
  e(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (r2.prototype = n2.prototype, new r2());
}
var r = function() {
  return r = Object.assign || function(t2) {
    for (var e2, n2 = 1, r2 = arguments.length; n2 < r2; n2++) for (var o2 in e2 = arguments[n2]) Object.prototype.hasOwnProperty.call(e2, o2) && (t2[o2] = e2[o2]);
    return t2;
  }, r.apply(this, arguments);
};
function o(t2, e2, n2, r2) {
  return new (n2 || (n2 = Promise))((function(o2, i2) {
    function s2(t3) {
      try {
        c2(r2.next(t3));
      } catch (t4) {
        i2(t4);
      }
    }
    function a2(t3) {
      try {
        c2(r2.throw(t3));
      } catch (t4) {
        i2(t4);
      }
    }
    function c2(t3) {
      var e3;
      t3.done ? o2(t3.value) : (e3 = t3.value, e3 instanceof n2 ? e3 : new n2((function(t4) {
        t4(e3);
      }))).then(s2, a2);
    }
    c2((r2 = r2.apply(t2, e2 || [])).next());
  }));
}
function i(t2, e2) {
  var n2, r2, o2, i2, s2 = { label: 0, sent: function() {
    if (1 & o2[0]) throw o2[1];
    return o2[1];
  }, trys: [], ops: [] };
  return i2 = { next: a2(0), throw: a2(1), return: a2(2) }, "function" == typeof Symbol && (i2[Symbol.iterator] = function() {
    return this;
  }), i2;
  function a2(a3) {
    return function(c2) {
      return (function(a4) {
        if (n2) throw new TypeError("Generator is already executing.");
        for (; i2 && (i2 = 0, a4[0] && (s2 = 0)), s2; ) try {
          if (n2 = 1, r2 && (o2 = 2 & a4[0] ? r2.return : a4[0] ? r2.throw || ((o2 = r2.return) && o2.call(r2), 0) : r2.next) && !(o2 = o2.call(r2, a4[1])).done) return o2;
          switch (r2 = 0, o2 && (a4 = [2 & a4[0], o2.value]), a4[0]) {
            case 0:
            case 1:
              o2 = a4;
              break;
            case 4:
              return s2.label++, { value: a4[1], done: false };
            case 5:
              s2.label++, r2 = a4[1], a4 = [0];
              continue;
            case 7:
              a4 = s2.ops.pop(), s2.trys.pop();
              continue;
            default:
              if (!(o2 = s2.trys, (o2 = o2.length > 0 && o2[o2.length - 1]) || 6 !== a4[0] && 2 !== a4[0])) {
                s2 = 0;
                continue;
              }
              if (3 === a4[0] && (!o2 || a4[1] > o2[0] && a4[1] < o2[3])) {
                s2.label = a4[1];
                break;
              }
              if (6 === a4[0] && s2.label < o2[1]) {
                s2.label = o2[1], o2 = a4;
                break;
              }
              if (o2 && s2.label < o2[2]) {
                s2.label = o2[2], s2.ops.push(a4);
                break;
              }
              o2[2] && s2.ops.pop(), s2.trys.pop();
              continue;
          }
          a4 = e2.call(t2, s2);
        } catch (t3) {
          a4 = [6, t3], r2 = 0;
        } finally {
          n2 = o2 = 0;
        }
        if (5 & a4[0]) throw a4[1];
        return { value: a4[0] ? a4[1] : void 0, done: true };
      })([a3, c2]);
    };
  }
}
function s(t2, e2, n2) {
  if (n2 || 2 === arguments.length) for (var r2, o2 = 0, i2 = e2.length; o2 < i2; o2++) !r2 && o2 in e2 || (r2 || (r2 = Array.prototype.slice.call(e2, 0, o2)), r2[o2] = e2[o2]);
  return t2.concat(r2 || Array.prototype.slice.call(e2));
}
var a = { request: null, response: null };
var c = function(t2, e2) {
  return void 0 === e2 && (e2 = {}), o(void 0, void 0, void 0, (function() {
    var n2, o2;
    return i(this, (function(i2) {
      switch (i2.label) {
        case 0:
          return e2 = r({ method: "GET" }, e2), a.request ? [4, a.request(e2)] : [3, 2];
        case 1:
          e2 = i2.sent(), i2.label = 2;
        case 2:
          return [4, fetch("".concat(t2), e2)];
        case 3:
          return n2 = i2.sent(), a.response ? [4, a.response({ response: n2 })] : [3, 5];
        case 4:
          i2.sent(), i2.label = 5;
        case 5:
          return [4, n2.json()];
        case 6:
          return o2 = i2.sent(), [2, { response: n2, data: o2 }];
      }
    }));
  }));
};
var u = function(t2, e2, n2) {
  return void 0 === n2 && (n2 = {}), o(void 0, void 0, void 0, (function() {
    var o2, s2, c2, u2;
    return i(this, (function(i2) {
      switch (i2.label) {
        case 0:
          return o2 = e2 instanceof FormData, s2 = {}, n2.headers && (s2 = n2.headers), o2 || (s2["Content-Type"] = "application/x-www-form-urlencoded"), n2 = r({ method: "POST", headers: s2, body: o2 ? e2 : Object.keys(e2).map((function(t3) {
            var n3 = e2[t3];
            return "string" != typeof n3 && (n3 = JSON.stringify(e2[t3])), "".concat(encodeURIComponent(t3), "=").concat(encodeURIComponent(n3));
          })).join("&") }, n2), a.request ? [4, a.request(n2)] : [3, 2];
        case 1:
          n2 = i2.sent(), i2.label = 2;
        case 2:
          return [4, fetch("".concat(t2), n2)];
        case 3:
          return c2 = i2.sent(), a.response ? [4, a.response({ response: c2 })] : [3, 5];
        case 4:
          i2.sent(), i2.label = 5;
        case 5:
          return [4, c2.json()];
        case 6:
          return u2 = i2.sent(), [2, { response: c2, data: u2 }];
      }
    }));
  }));
};
var h = (function(t2) {
  function e2(e3) {
    return t2.call(this, e3) || this;
  }
  return n(e2, t2), e2;
})((function(t2) {
  function e2(e3) {
    var n2 = t2.call(this, e3) || this;
    return n2.name = n2.constructor.name, n2;
  }
  return n(e2, t2), e2;
})(Error));
var l = { isEnabled: false, token: "" };
a.request = function(e2) {
  return o(void 0, void 0, void 0, (function() {
    var n2;
    return i(this, (function(o2) {
      switch (o2.label) {
        case 0:
          return t.ACCESS_KEY && t.SECRET_KEY && (e2.headers || (e2.headers = {}), e2.headers = r(r({}, e2.headers), { authorization: "Basic ".concat(btoa("".concat(t.ACCESS_KEY, ":").concat(t.SECRET_KEY))) })), l.isEnabled ? "POST" !== e2.method ? [3, 3] : l.token ? [3, 2] : [4, c("".concat(t.MODULE, "/api/config/fetchCsrf"), { headers: { "X-CSRF-Token": "fetch" } })] : [3, 3];
        case 1:
          n2 = o2.sent().response, l.token = n2.headers.get("X-CSRF-Token") || n2.headers.get("x-csrf-token") || "", o2.label = 2;
        case 2:
          e2.headers && (e2.headers = r(r({}, e2.headers), { "X-CSRF-Token": l.token })), o2.label = 3;
        case 3:
          return [2, e2];
      }
    }));
  }));
}, a.response = function(t2) {
  var e2 = t2.response;
  return o(void 0, void 0, void 0, (function() {
    return i(this, (function(t3) {
      if (302 === e2.status) throw new h("Unauthorized");
      return [2];
    }));
  }));
};
var d = function() {
  return o(void 0, void 0, void 0, (function() {
    var e2, n2;
    return i(this, (function(r2) {
      switch (r2.label) {
        case 0:
          return [4, c("".concat(t.MODULE, "/api/config"))];
        case 1:
          return (e2 = r2.sent()).data && e2.data.csrf && (n2 = e2.data["X-CSRF-Token"], l.isEnabled = true, l.token = n2), [2, e2.data];
      }
    }));
  }));
};
var p = function(e2, n2) {
  return o(void 0, void 0, void 0, (function() {
    var r2, o2, s2, a2, c2, h2, l2;
    return i(this, (function(i2) {
      switch (i2.label) {
        case 0:
          if (!e2) throw new Error("Missing Pixel");
          return r2 = { expression: e2 }, n2 && (r2.insightId = n2), [4, u("".concat(t.MODULE, "/api/engine/runPixel"), r2, {})];
        case 1:
          for (o2 = i2.sent(), s2 = [], a2 = 0, c2 = o2.data.pixelReturn; a2 < c2.length; a2++) h2 = c2[a2], l2 = h2.output, h2.operationType.indexOf("ERROR") > -1 && s2.push(l2);
          return [2, { errors: s2, insightId: o2.data.insightID, pixelReturn: o2.data.pixelReturn }];
      }
    }));
  }));
};
var f = function(e2, n2) {
  return o(void 0, void 0, void 0, (function() {
    var r2, o2, s2, a2, c2;
    return i(this, (function(i2) {
      switch (i2.label) {
        case 0:
          if (!e2) throw Error("No Pixel To Execute");
          r2 = "", r2 += "expression=" + encodeURIComponent(e2), n2 && (r2 += "&insightId=" + encodeURIComponent(n2)), i2.label = 1;
        case 1:
          return i2.trys.push([1, 6, , 7]), [4, fetch("".concat(t.MODULE, "/api/engine/runPixelAsync"), { method: "POST", headers: { "Content-Type": "application/x-www-form-urlencoded" }, body: r2 })];
        case 2:
          return (o2 = i2.sent()).ok ? [3, 4] : [4, o2.json()];
        case 3:
          throw s2 = i2.sent(), Error(s2.errorMessage || "Failed to run pixel");
        case 4:
          return [4, o2.json()];
        case 5:
          if (!(a2 = i2.sent())) throw Error("No Pixel Response");
          return [2, { jobId: a2.jobId }];
        case 6:
          if ((c2 = i2.sent()) instanceof Error) throw c2;
          throw Error("An unknown error occurred");
        case 7:
          return [2];
      }
    }));
  }));
};
var v = function(e2) {
  return o(void 0, void 0, void 0, (function() {
    var n2, r2, o2, s2, a2, c2, u2, h2, l2, d2;
    return i(this, (function(i2) {
      switch (i2.label) {
        case 0:
          if (!e2) throw Error("No job id provided to get pixel response");
          (n2 = new URLSearchParams()).append("jobId", e2), i2.label = 1;
        case 1:
          return i2.trys.push([1, 6, , 7]), [4, fetch("".concat(t.MODULE, "/api/engine/result"), { method: "POST", headers: { "Content-Type": "application/x-www-form-urlencoded" }, body: n2 })];
        case 2:
          return (r2 = i2.sent()).ok ? [3, 4] : [4, r2.json()];
        case 3:
          throw o2 = i2.sent(), Error(o2.errorMessage || "Failed to get pixel response");
        case 4:
          return [4, r2.json()];
        case 5:
          if (!(s2 = i2.sent())) throw Error("No Pixel Response");
          for (a2 = [], c2 = 0, u2 = s2.pixelReturn; c2 < u2.length; c2++) h2 = u2[c2], l2 = h2.output, h2.operationType.indexOf("ERROR") > -1 && a2.push(l2);
          return [2, { errors: a2, insightId: s2.insightID, results: s2.pixelReturn }];
        case 6:
          if ((d2 = i2.sent()) instanceof Error) throw d2;
          throw Error("An unknown error occurred");
        case 7:
          return [2];
      }
    }));
  }));
};
var y = function(e2, n2) {
  return o(void 0, void 0, void 0, (function() {
    return i(this, (function(r2) {
      switch (r2.label) {
        case 0:
          return [4, u("".concat(t.MODULE, "/api/auth/login"), { username: e2, password: n2, disableRedirect: true })];
        case 1:
          return r2.sent(), [2, true];
      }
    }));
  }));
};
var b = function(e2, n2) {
  return void 0 === n2 && (n2 = false), o(void 0, void 0, void 0, (function() {
    var r2;
    return i(this, (function(s2) {
      switch (s2.label) {
        case 0:
          return [4, c("".concat(t.MODULE, "/api/auth/userinfo/").concat(e2))];
        case 1:
          if ((r2 = s2.sent()).data && r2.data.name) return [2, true];
          if (n2) throw new Error("Unable to login");
          return [2, new Promise((function(n3, r3) {
            if (window && window.top) var s3 = "".concat(t.MODULE, "/api/auth/login/").concat(e2), a2 = window.top.open(s3, "_blank", "height=600,width=400,top=300,left=600"), c2 = setInterval((function() {
              return o(void 0, void 0, void 0, (function() {
                var t2;
                return i(this, (function(r4) {
                  switch (r4.label) {
                    case 0:
                      return r4.trys.push([0, 4, , 5]), a2 && !a2.closed && void 0 !== a2.closed ? [3, 1] : (clearInterval(c2), [3, 3]);
                    case 1:
                      return a2.document.location.href.indexOf("".concat(window.location.host)) > -1 ? (clearInterval(c2), a2.close(), [4, b(e2, true)]) : [3, 3];
                    case 2:
                      t2 = r4.sent(), n3(t2), r4.label = 3;
                    case 3:
                      return [3, 5];
                    case 4:
                      return r4.sent(), [3, 5];
                    case 5:
                      return [2];
                  }
                }));
              }));
            }), 1e3);
            else r3("Unable to login");
          }))];
      }
    }));
  }));
};
var w = function() {
  return o(void 0, void 0, void 0, (function() {
    return i(this, (function(e2) {
      switch (e2.label) {
        case 0:
          return [4, c("".concat(t.MODULE, "/api/auth/logout/all"))];
        case 1:
          return e2.sent(), [2, true];
      }
    }));
  }));
};
var g = function(e2, n2, r2, s2) {
  return o(void 0, void 0, void 0, (function() {
    var o2, a2, c2, h2;
    return i(this, (function(i2) {
      switch (i2.label) {
        case 0:
          if (o2 = "", s2 = s2 || "", (n2 || r2 || s2) && (n2 && (o2.length > 0 && (o2 += "&"), o2 += "insightId=".concat(n2)), r2 && (o2.length > 0 && (o2 += "&"), o2 += "projectId=".concat(r2)), s2 && (o2.length > 0 && (o2 += "&"), o2 += "path=".concat(s2)), o2 = "?".concat(o2)), a2 = "".concat(t.MODULE, "/api/uploadFile/baseUpload").concat(o2), c2 = new FormData(), Array.isArray(e2)) for (h2 = 0; h2 < e2.length; h2++) c2.append("file", e2[h2]);
          else c2.append("file", e2);
          return [4, u(a2, c2, {})];
        case 1:
          return [2, i2.sent().data];
      }
    }));
  }));
};
var E = function(e2, n2) {
  return o(void 0, void 0, void 0, (function() {
    return i(this, (function(r2) {
      return [2, new Promise((function(r3) {
        if (!e2) throw Error("No Insight ID provided for download.");
        var o2 = "".concat(t.MODULE, "/api/engine/downloadFile?insightId=").concat(e2, "&fileKey=").concat(encodeURIComponent(n2)), i2 = document.createElement("a");
        i2.href = o2, i2.target = "_blank", document.body.appendChild(i2), i2.click(), document.body.removeChild(i2), r3();
      }))];
    }));
  }));
};
var _ = function(e2) {
  return o(void 0, void 0, void 0, (function() {
    return i(this, (function(n2) {
      switch (n2.label) {
        case 0:
          return [4, u("".concat(t.MODULE, "/api/engine/partial"), { jobId: e2 })];
        case 1:
          return [2, n2.sent().data];
      }
    }));
  }));
};
var m = function(e2) {
  return o(void 0, void 0, void 0, (function() {
    return i(this, (function(n2) {
      switch (n2.label) {
        case 0:
          return [4, u("".concat(t.MODULE, "/api/engine/console"), { jobId: e2 })];
        case 1:
          return [2, n2.sent().data];
      }
    }));
  }));
};
var I = function(e2) {
  return o(void 0, void 0, void 0, (function() {
    return i(this, (function(n2) {
      switch (n2.label) {
        case 0:
          return [4, u("".concat(t.MODULE, "/api/engine/console"), { jobId: e2 })];
        case 1:
          return [2, n2.sent().data];
      }
    }));
  }));
};
var O = (function() {
  function e2() {
    var e3 = this;
    this._store = { insightId: "", isInitialized: false, isAuthorized: false, isReady: false, error: null, system: null, options: { appId: "", python: null } }, this.initialize = function(n2) {
      return o(e3, void 0, void 0, (function() {
        var e4, r2, o2, s2, a2, c2;
        return i(this, (function(i2) {
          switch (i2.label) {
            case 0:
              return this._store.isInitialized = false, this._store.isAuthorized = false, this._store.isReady = false, e4 = { app: n2 && n2.app ? n2.app : "", python: n2 && void 0 !== n2.python ? n2.python : { type: "detect" } }, this._store.options.appId = "", e4.app && (this._store.options.appId = e4.app), this._store.options.python = null, e4.python ? "detect" !== e4.python.type ? [3, 2] : (r2 = this._store.options, [4, this.detectScript()]) : [3, 5];
            case 1:
              return r2.python = i2.sent(), [3, 5];
            case 2:
              return "file" !== e4.python.type ? [3, 4] : (o2 = this._store.options, [4, this.loadScript(e4.python)]);
            case 3:
              return o2.python = i2.sent(), [3, 5];
            case 4:
              "script" === e4.python.type && (this._store.options.python = { script: e4.python.script, alias: e4.python.alias }), i2.label = 5;
            case 5:
              try {
                if (!document) return [2];
                (s2 = JSON.parse((null === (c2 = document.getElementById("semoss-env")) || void 0 === c2 ? void 0 : c2.textContent) || "")) && t.update({ APP: s2.APP, MODULE: s2.MODULE });
              } catch (t2) {
              }
              i2.label = 6;
            case 6:
              if (i2.trys.push([6, 11, , 12]), t.APP && (this._store.options.appId = t.APP), !t.MODULE) throw new Error("module is required");
              return [4, this.setupSystem()];
            case 7:
              if (i2.sent(), !this._store.isInitialized) throw new Error("Error loading system");
              return this._store.system && Object.keys(this._store.system.config.logins).length > 0 || t.ACCESS_KEY && t.SECRET_KEY ? (this._store.isAuthorized = true, [4, this.setupInsight()]) : [3, 9];
            case 8:
              return i2.sent(), [3, 10];
            case 9:
              this._store.isAuthorized = false, i2.label = 10;
            case 10:
              return [3, 12];
            case 11:
              return a2 = i2.sent(), console.warn(a2), this._store.error = a2, [3, 12];
            case 12:
              return [2];
          }
        }));
      }));
    }, this.destroy = function() {
      return o(e3, void 0, void 0, (function() {
        var t2;
        return i(this, (function(e4) {
          switch (e4.label) {
            case 0:
              return e4.trys.push([0, 2, 3, 4]), [4, this.destroyInsight()];
            case 1:
              return e4.sent(), this.destroySystem(), [3, 4];
            case 2:
              return t2 = e4.sent(), console.warn(t2), this._store.error = t2, [3, 4];
            case 3:
              return this._store.isInitialized = false, this._store.isAuthorized = false, this._store.isReady = false, [7];
            case 4:
              return [2];
          }
        }));
      }));
    }, this.setupSystem = function() {
      return o(e3, void 0, void 0, (function() {
        var t2, e4, n2;
        return i(this, (function(r2) {
          switch (r2.label) {
            case 0:
              return this._store.isInitialized = false, [4, d()];
            case 1:
              if (t2 = r2.sent(), e4 = null, t2) for (n2 in e4 = { config: { logins: {}, availableProviders: [] } }, t2) e4.config[n2] = t2[n2];
              return this._store.system = e4, this._store.system ? this._store.isInitialized = true : this._store.isInitialized = false, [2];
          }
        }));
      }));
    }, this.destroySystem = function() {
      e3._store.system = null;
    }, this.setupInsight = function() {
      return o(e3, void 0, void 0, (function() {
        var t2, e4, n2, r2, o2;
        return i(this, (function(i2) {
          switch (i2.label) {
            case 0:
              return this._store.isReady = false, t2 = "", this._store.options.appId && (t2 += 'SetContext("'.concat(this._store.options.appId, '");')), this._store.options.python && this._store.options.python.script && ((e4 = this._store.options.python.alias) || (e4 = "smss", console.warn("Alias not found. Loading python as ".concat(e4))), t2 += '\nWriteObjectToFile(value="'.concat(this._store.options.python.script, '", filePath = "temp.py");\nLoadPyFromFile(alias="').concat(e4, '", filePath="temp.py");    \n            ')), t2 || (t2 = "1+1;"), [4, p(t2, "new")];
            case 1:
              if (n2 = i2.sent(), r2 = n2.insightId, (o2 = n2.errors).length) throw new Error(o2[0]);
              return this._store.insightId = r2, this._store.isReady = true, [2];
          }
        }));
      }));
    }, this.destroyInsight = function() {
      return o(e3, void 0, void 0, (function() {
        var t2;
        return i(this, (function(e4) {
          switch (e4.label) {
            case 0:
              return this._store.insightId ? [4, p("DropInsight()", this._store.insightId)] : [2];
            case 1:
              if ((t2 = e4.sent().errors).length) throw new Error(t2[0]);
              return this._store.insightId = "", [2];
          }
        }));
      }));
    }, this.processActionError = function(t2) {
      if (!(t2 instanceof h)) throw t2;
      e3._store.isAuthorized = false;
    }, this.detectScript = function() {
      return o(e3, void 0, void 0, (function() {
        var t2, e4, n2;
        return i(this, (function(r2) {
          t2 = { script: "", alias: "" };
          try {
            if (e4 = document.querySelector("[data-semoss-py]"), !(n2 = null == e4 ? void 0 : e4.textContent)) return [2, null];
            t2.script = n2, t2.alias = (null == e4 ? void 0 : e4.getAttribute("data-alias")) || "";
          } catch (t3) {
            return console.warn(t3), [2, null];
          }
          return [2, t2];
        }));
      }));
    }, this.loadScript = function(t2) {
      return o(e3, void 0, void 0, (function() {
        var e4, n2, r2;
        return i(this, (function(o2) {
          switch (o2.label) {
            case 0:
              e4 = { script: "", alias: t2.alias }, o2.label = 1;
            case 1:
              return o2.trys.push([1, 4, , 5]), [4, fetch(t2.path)];
            case 2:
              return [4, o2.sent().text()];
            case 3:
              if (!(n2 = o2.sent())) throw new Error("No Text");
              return e4.script = n2, [3, 5];
            case 4:
              return r2 = o2.sent(), console.warn(r2), [2, null];
            case 5:
              return [2, e4];
          }
        }));
      }));
    }, this.actions = { login: function(t2) {
      return o(e3, void 0, void 0, (function() {
        var e4, n2;
        return i(this, (function(r2) {
          switch (r2.label) {
            case 0:
              return r2.trys.push([0, 8, , 9]), e4 = false, "native" !== t2.type ? [3, 2] : [4, y(t2.username, t2.password)];
            case 1:
              return r2.sent() && (e4 = true), [3, 4];
            case 2:
              return "oauth" !== t2.type ? [3, 4] : [4, b(t2.provider)];
            case 3:
              r2.sent() && (e4 = true), r2.label = 4;
            case 4:
              return e4 ? (this._store.isAuthorized = true, [4, this.setupInsight()]) : [3, 6];
            case 5:
              return r2.sent(), [3, 7];
            case 6:
              this._store.isAuthorized = false, r2.label = 7;
            case 7:
              return [2, e4];
            case 8:
              return n2 = r2.sent(), this.processActionError(n2), [3, 9];
            case 9:
              return [2, false];
          }
        }));
      }));
    }, logout: function() {
      return o(e3, void 0, void 0, (function() {
        var t2;
        return i(this, (function(e4) {
          switch (e4.label) {
            case 0:
              return e4.trys.push([0, 2, , 3]), [4, w()];
            case 1:
              return e4.sent() ? [2, true] : [2, false];
            case 2:
              return t2 = e4.sent(), this.processActionError(t2), [3, 3];
            case 3:
              return [2, false];
          }
        }));
      }));
    }, run: function(t2, n2) {
      return void 0 === n2 && (n2 = "insight"), o(e3, void 0, void 0, (function() {
        var e4, r2, o2, s2, a2;
        return i(this, (function(i2) {
          switch (i2.label) {
            case 0:
              if (i2.trys.push([0, 2, , 3]), e4 = "", "insight" === n2) e4 = this._store.insightId;
              else if ("app" === n2) {
                if (!this._store.options.appId) throw new Error("An app is required to run in the app space");
                e4 = this._store.options.appId;
              }
              return [4, p(t2, e4)];
            case 1:
              if (r2 = i2.sent(), o2 = r2.errors, s2 = r2.pixelReturn, o2.length) throw new Error(o2.join(""));
              return [2, { pixelReturn: s2 }];
            case 2:
              return a2 = i2.sent(), this.processActionError(a2), [3, 3];
            case 3:
              throw new Error("No response");
          }
        }));
      }));
    }, runPy: function(t2, n2) {
      return void 0 === n2 && (n2 = "insight"), o(e3, void 0, void 0, (function() {
        return i(this, (function(e4) {
          switch (e4.label) {
            case 0:
              return [4, this.actions.run('Py("<encode>'.concat(t2, '</encode>")'), n2)];
            case 1:
              return [2, { output: e4.sent().pixelReturn[0].output[0].output }];
          }
        }));
      }));
    }, askModel: function(t2, n2, r2) {
      return void 0 === r2 && (r2 = "insight"), o(e3, void 0, void 0, (function() {
        return i(this, (function(e4) {
          switch (e4.label) {
            case 0:
              return [4, this.actions.run('LLM(engine=["'.concat(t2, '"], command=["<encode>').concat(n2, '</encode>"]);'), r2)];
            case 1:
              return [2, { output: e4.sent().pixelReturn[0].output }];
          }
        }));
      }));
    }, queryDatabase: function(t2, n2, r2, s2) {
      return void 0 === r2 && (r2 = { collect: -1 }), void 0 === s2 && (s2 = "insight"), o(e3, void 0, void 0, (function() {
        return i(this, (function(e4) {
          switch (e4.label) {
            case 0:
              return [4, this.actions.run('Database(database=["'.concat(t2, '"]) | Query("<encode>').concat(n2, '</encode>") | Collect(').concat("number" == typeof r2.collect ? r2.collect : -1, ");;"), s2)];
            case 1:
              return [2, { output: e4.sent().pixelReturn[0].output }];
          }
        }));
      }));
    }, upload: function(t2, n2, r2) {
      return void 0 === r2 && (r2 = "insight"), o(e3, void 0, void 0, (function() {
        var e4;
        return i(this, (function(o2) {
          switch (o2.label) {
            case 0:
              return o2.trys.push([0, 2, , 3]), [4, g(t2, this._store.insightId, "app" === r2 ? this._store.options.appId : "", n2)];
            case 1:
              return [2, o2.sent()];
            case 2:
              return e4 = o2.sent(), this.processActionError(e4), [3, 3];
            case 3:
              throw new Error("No upload");
          }
        }));
      }));
    }, download: function(t2, n2) {
      return void 0 === n2 && (n2 = "insight"), o(e3, void 0, void 0, (function() {
        var e4, r2, o2, s2;
        return i(this, (function(i2) {
          switch (i2.label) {
            case 0:
              return e4 = this.getSpaceId(n2), [4, this.actions.run('DownloadAsset(filePath=["'.concat(t2, '"], space=["').concat(e4, '"]);'), "insight")];
            case 1:
              r2 = i2.sent().pixelReturn, o2 = r2[0].output, i2.label = 2;
            case 2:
              return i2.trys.push([2, 4, , 5]), [4, E(this._store.insightId, o2)];
            case 3:
              return i2.sent(), [2, true];
            case 4:
              return s2 = i2.sent(), this.processActionError(s2), [3, 5];
            case 5:
              throw new Error("No download");
          }
        }));
      }));
    } };
  }
  return Object.defineProperty(e2.prototype, "insightId", { get: function() {
    return this._store.insightId;
  }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "isInitialized", { get: function() {
    return this._store.isInitialized;
  }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "isAuthorized", { get: function() {
    return this._store.isAuthorized;
  }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "isReady", { get: function() {
    return this._store.isReady;
  }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "error", { get: function() {
    return this._store.error;
  }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "system", { get: function() {
    return this._store.system;
  }, enumerable: false, configurable: true }), e2.prototype.getSpaceId = function(t2) {
    var e3 = "";
    if ("insight" === t2) e3 = this._store.insightId;
    else if ("app" === t2) {
      if (!this._store.options.appId) throw new Error("An app is required to run in the app space");
      e3 = this._store.options.appId;
    }
    return e3;
  }, e2;
})();

export {
  t,
  r,
  o,
  i,
  s,
  a,
  c,
  u,
  h,
  d,
  p,
  f,
  v,
  y,
  b,
  w,
  g,
  E,
  _,
  m,
  I,
  O
};
//# sourceMappingURL=chunk-KLPS7OE4.js.map
